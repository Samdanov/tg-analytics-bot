# Пример работы с каналами-прокладками

## Сценарий: Анализ канала, который оказался прокладкой

### 1. Пользователь отправляет канал боту

```
👤 Пользователь:
https://t.me/channels_catalog
```

### 2. Бот распознает канал

```
🤖 Бот:
Найден канал:
channels_catalog
@channels_catalog

Выбери количество похожих каналов для анализа:
[📊 10 каналов] [📊 25 каналов]
[📊 50 каналов] [📊 100 каналов]
[🚀 500 каналов (макс)]
```

### 3. Пользователь выбирает количество (например, 50)

```
👤 Пользователь:
*нажимает [📊 50 каналов]*
```

### 4. Бот начинает проверку

```
🤖 Бот:
🔍 Проверяю канал @channels_catalog...
```

### 5. Бот обнаруживает канал-прокладку!

```
🤖 Бот:
🔗 Канал-прокладка обнаружен!

@channels_catalog содержит в основном ссылки на другие каналы.
Выберите канал для анализа:

╔═══════════════════════════════════════╗
║ @tech_news (23 упоминания)            ║
╠═══════════════════════════════════════╣
║ @business_channel (18 упоминаний)     ║
╠═══════════════════════════════════════╣
║ @crypto_info (15 упоминаний)          ║
╠═══════════════════════════════════════╣
║ @marketing_pro (12 упоминаний)        ║
╠═══════════════════════════════════════╣
║ @startup_news (8 упоминаний)          ║
╠═══════════════════════════════════════╣
║ @investment_tips (5 упоминаний)       ║
╠═══════════════════════════════════════╣
║ @daily_digest (4 упоминания)          ║
╠═══════════════════════════════════════╣
║ @special_offers (3 упоминания)        ║
╠═══════════════════════════════════════╣
║ ⚠️ Все равно анализировать            ║
║    @channels_catalog                  ║
╚═══════════════════════════════════════╝
```

### 6. Пользователь выбирает канал

```
👤 Пользователь:
*нажимает [@tech_news (23 упоминания)]*
```

### 7. Бот продолжает анализ выбранного канала

```
🤖 Бот:
Запускаю анализ для @tech_news...
Поиск 50 похожих каналов. Это может занять немного времени...

...

✅ Анализ завершён, отправляю отчёт...

[Файл: report_tech_news.xlsx]
📊 Отчёт: 50 похожих каналов для @tech_news
```

---

## Альтернативный сценарий: Принудительный анализ прокладки

Если пользователь все же хочет проанализировать канал-прокладку:

### Шаг 6 (альтернативный)

```
👤 Пользователь:
*нажимает [⚠️ Все равно анализировать @channels_catalog]*
```

### Шаг 7

```
🤖 Бот:
Запускаю принудительный анализ для @channels_catalog...
Поиск 50 похожих каналов. Это может занять немного времени...

...

✅ Анализ завершён, отправляю отчёт...

[Файл: report_channels_catalog.xlsx]
📊 Отчёт: 50 похожих каналов для @channels_catalog

⚠️ Примечание: Результаты могут быть неточными, 
так как канал содержит мало собственного контента.
```

---

## Визуализация логики

```
                    Пользователь
                         ↓
              Отправляет @proxy_channel
                         ↓
                ┌────────────────────┐
                │   Бот загружает    │
                │   50 постов канала │
                └────────────────────┘
                         ↓
            ┌────────────────────────────┐
            │ Анализирует посты:         │
            │ - Сколько ссылок?          │
            │ - Сколько текста?          │
            │ - Сколько уникальных       │
            │   каналов упоминается?     │
            └────────────────────────────┘
                         ↓
          ┌──────────────────────────────┐
          │   Это канал-прокладка?       │
          └──────────────────────────────┘
                  ↙              ↘
             ДА                   НЕТ
              ↓                    ↓
    ┌──────────────────┐   ┌──────────────────┐
    │ Показать список  │   │ Продолжить       │
    │ найденных каналов│   │ обычный анализ   │
    └──────────────────┘   └──────────────────┘
              ↓                    ↓
    Пользователь выбирает   Анализ + отчёт
              ↓
    Анализ выбранного канала
              ↓
           Отчёт
```

---

## Примеры постов из канала-прокладки

### ❌ Канал-прокладка (обнаружится):

```
Пост 1: "Лучший канал о технологиях: @tech_news"
Пост 2: "Крипто новости: @crypto_info"
Пост 3: "Бизнес и стартапы: @business_channel"
Пост 4: "Маркетинг: @marketing_pro"
Пост 5: "@tech_news - топ!"
Пост 6: "Инвестиции: @investment_tips"
```

**Результат:**
- 6 уникальных каналов
- ~30 символов текста в среднем
- 100% постов содержат ссылки
→ **ПРОКЛАДКА ОБНАРУЖЕНА!**

### ✅ Обычный канал (не прокладка):

```
Пост 1: "Сегодня обсудим новую модель iPhone 15. 
         Характеристики впечатляют: процессор A17,
         камера 48MP... (длинный текст)"
         
Пост 2: "Запустили новую функцию в приложении!
         Теперь можно делать... (длинный текст)
         Подробнее: https://example.com"
         
Пост 3: "Вебинар завтра в 18:00. Обсудим...
         (длинный текст) Регистрация по ссылке"
```

**Результат:**
- 0-1 упоминаний каналов
- ~500 символов текста в среднем  
- 30% постов содержат ссылки
→ **ОБЫЧНЫЙ КАНАЛ** (анализ продолжается)

---

## Технические метрики

Канал считается прокладкой при соблюдении **ВСЕХ** условий:

| Критерий | Порог | Описание |
|----------|-------|----------|
| Уникальных каналов | ≥ 3 | Минимум 3 разных упоминания |
| Средняя длина текста | < 100 символов | После удаления ссылок |
| Доля постов со ссылками | > 50% | Более половины постов |

### Примеры:

```
Канал A: 5 упоминаний, 80 символов, 70% со ссылками → ✅ ПРОКЛАДКА
Канал B: 2 упоминания, 50 символов, 90% со ссылками → ❌ НЕ ПРОКЛАДКА (мало упоминаний)
Канал C: 5 упоминаний, 150 символов, 70% со ссылками → ❌ НЕ ПРОКЛАДКА (много текста)
Канал D: 5 упоминаний, 80 символов, 40% со ссылками → ❌ НЕ ПРОКЛАДКА (мало ссылок)
```
