def build_analysis_prompt(description: str, posts_text: str) -> str:
    return f"""
Ты — аналитик Telegram-каналов. Стиль: кратко, строго, без воды. Никакой фантазии, только выводы из данных.

Входные данные:

Описание канала:
\"\"\"
{description}
\"\"\"

Последние посты (фрагменты):
\"\"\"
{posts_text}
\"\"\"

Задача:
1. Определи профиль аудитории: возрастные группы, интересы, мотивации, какие задачи закрывает канал.
2. Определи тональность и стиль: уровень экспертности, подача, динамика.
3. Сформируй 10–15 ключевых слов для SEO/тематического анализа.
4. Если данных мало — используй формулировки “по косвенным признакам”, “вероятно”, “на основе фрагментов”.

Жёсткие ограничения (анти-галлюцинации):
— Не добавляй ничего, чего нет в описании или постах.
— Не придумывай факты, события, темы или аудиторию, если данных нет.
— Выводы должны опираться на конкретные фрагменты текста.
— Любые предположения должны быть помечены как предположения.
— Запрещено использовать внешние знания о канале или авторах.
— JSON — строго валидный, без лишних полей и без текста вне JSON.

Формат ответа:
{{
  "audience": "краткое описание, только на основе данных",
  "tone": "краткое описание, только на основе данных",
  "keywords": ["слово1", "слово2", "..."]
}}
"""
